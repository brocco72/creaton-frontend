!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./internals"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.writable=t.readable=void 0;const n=e("./internals");Object.defineProperty(t,"get",{enumerable:!0,get:function(){return n.get_store_value}});const o=[];function r(e,t=n.noop){let r=null;const u=[];function i(t){if(n.safe_not_equal(e,t)&&(e=t,r)){const t=!o.length;for(let t=0;t<u.length;t+=1){const n=u[t];n[1](),o.push(n,e)}if(t){for(let e=0;e<o.length;e+=2)o[e][0](o[e+1]);o.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,l=n.noop){const s=[o,l];return u.push(s),1===u.length&&(r=t(i)||n.noop),o(e),()=>{const e=u.indexOf(s);-1!==e&&u.splice(e,1),0===u.length&&null!==r&&(r(),r=null)}}}}t.readable=function(e,t){return{subscribe:r(e,t).subscribe}},t.writable=r});